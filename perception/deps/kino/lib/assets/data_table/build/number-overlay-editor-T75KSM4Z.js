import{e as ge,g as he,h as Se}from"./chunk-37AHYJRG.js";var ee=ge(he(),1);var ye=Se("div")({name:"NumberOverlayEditorStyle",class:"gdg-n15fjm3e",propsAsIs:!1});var V=ge(he());function Ne(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t}var ne;(function(e){e.event="event",e.props="prop"})(ne||(ne={}));function H(){}function je(e){var r,t=void 0;return function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return r&&n.length===r.length&&n.every(function(i,f){return i===r[f]})||(r=n,t=e.apply(void 0,n)),t}}function ie(e){return!!(e||"").match(/\d/)}function re(e){return e==null}function Pe(e){return typeof e=="number"&&isNaN(e)}function Ve(e){return re(e)||Pe(e)||typeof e=="number"&&!isFinite(e)}function De(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Me(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Le(e,r,t){var n=Me(t),a=e.search(/[1-9]/);return a=a===-1?e.length:a,e.substring(0,a)+e.substring(a,e.length).replace(n,"$1"+r)}function Ke(e){var r=(0,V.useRef)(e);r.current=e;var t=(0,V.useRef)(function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return r.current.apply(r,n)});return t.current}function de(e,r){r===void 0&&(r=!0);var t=e[0]==="-",n=t&&r;e=e.replace("-","");var a=e.split("."),i=a[0],f=a[1]||"";return{beforeDecimal:i,afterDecimal:f,hasNegation:t,addNegation:n}}function $e(e){if(!e)return e;var r=e[0]==="-";r&&(e=e.substring(1,e.length));var t=e.split("."),n=t[0].replace(/^0+/,"")||"0",a=t[1]||"";return(r?"-":"")+n+(a?"."+a:"")}function Ce(e,r,t){for(var n="",a=t?"0":"",i=0;i<=r-1;i++)n+=e[i]||a;return n}function pe(e,r){return Array(r+1).join(e)}function Ie(e){var r=e+"",t=r[0]==="-"?"-":"";t&&(r=r.substring(1));var n=r.split(/[eE]/g),a=n[0],i=n[1];if(i=Number(i),!i)return t+a;a=a.replace(".","");var f=1+i,p=a.length;return f<0?a="0."+pe("0",Math.abs(f))+a:f>=p?a=a+pe("0",f-p):a=(a.substring(0,f)||"0")+"."+a.substring(f),t+a}function xe(e,r,t){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||t)&&r,a=de(e),i=a.beforeDecimal,f=a.afterDecimal,p=a.hasNegation,x=parseFloat("0."+(f||"0")),w=f.length<=r?"0."+f:x.toFixed(r),g=w.split("."),s=i;i&&Number(g[0])&&(s=i.split("").reverse().reduce(function(I,F,S){return I.length>S?(Number(I[0])+Number(F)).toString()+I.substring(1,I.length):F+I},g[0]));var m=Ce(g[1]||"",r,t),h=p?"-":"",l=n?".":"";return""+h+s+l+m}function Y(e,r){if(e.value=e.value,e!==null){if(e.createTextRange){var t=e.createTextRange();return t.move("character",r),t.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(r,r),!0):(e.focus(),!1)}}var Ee=je(function(e,r){for(var t=0,n=0,a=e.length,i=r.length;e[t]===r[t]&&t<a;)t++;for(;e[a-1-n]===r[i-1-n]&&i-n>t&&a-n>t;)n++;return{from:{start:t,end:a-n},to:{start:t,end:i-n}}}),We=function(e,r){var t=Math.min(e.selectionStart,r);return{from:{start:t,end:e.selectionEnd},to:{start:t,end:r}}};function Ue(e,r,t){return Math.min(Math.max(e,r),t)}function se(e){return Math.max(e.selectionStart,e.selectionEnd)}function Ge(){return typeof navigator!="undefined"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Ze(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function qe(e){var r=e.currentValue,t=e.formattedValue,n=e.currentValueIndex,a=e.formattedValueIndex;return r[n]===t[a]}function ze(e,r,t,n,a,i,f){f===void 0&&(f=qe);var p=a.findIndex(function(T){return T}),x=e.slice(0,p);!r&&!t.startsWith(x)&&(r=x,t=x+t,n=n+x.length);for(var w=t.length,g=e.length,s={},m=new Array(w),h=0;h<w;h++){m[h]=-1;for(var l=0,I=g;l<I;l++){var F=f({currentValue:t,lastValue:r,formattedValue:e,currentValueIndex:h,formattedValueIndex:l});if(F&&s[l]!==!0){m[h]=l,s[l]=!0;break}}}for(var S=n;S<w&&(m[S]===-1||!i(t[S]));)S++;var O=S===w||m[S]===-1?g:m[S];for(S=n-1;S>0&&m[S]===-1;)S--;var A=S===-1||m[S]===-1?0:m[S]+1;return A>O?O:n-A<O-n?A:O}function be(e,r,t,n){var a=e.length;if(r=Ue(r,0,a),n==="left"){for(;r>=0&&!t[r];)r--;r===-1&&(r=t.indexOf(!0))}else{for(;r<=a&&!t[r];)r++;r>a&&(r=t.lastIndexOf(!0))}return r===-1&&(r=a),r}function He(e){for(var r=Array.from({length:e.length+1}).map(function(){return!0}),t=0,n=r.length;t<n;t++)r[t]=!!(ie(e[t])||ie(e[t-1]));return r}function Ae(e,r,t,n,a,i){i===void 0&&(i=H);var f=Ke(function(l,I){var F,S;return Ve(l)?(S="",F=""):typeof l=="number"||I?(S=typeof l=="number"?Ie(l):l,F=n(S)):(S=a(l,void 0),F=n(S)),{formattedValue:F,numAsString:S}}),p=(0,V.useState)(function(){return f(re(e)?r:e,t)}),x=p[0],w=p[1],g=function(l,I){l.formattedValue!==x.formattedValue&&w({formattedValue:l.formattedValue,numAsString:l.value}),i(l,I)},s=e,m=t;re(e)&&(s=x.numAsString,m=!0);var h=f(s,m);return(0,V.useMemo)(function(){w(h)},[h.formattedValue]),[x,g]}function Je(e){return e.replace(/[^0-9]/g,"")}function Qe(e){return e}function Xe(e){var r=e.type;r===void 0&&(r="text");var t=e.displayType;t===void 0&&(t="input");var n=e.customInput,a=e.renderText,i=e.getInputRef,f=e.format;f===void 0&&(f=Qe);var p=e.removeFormatting;p===void 0&&(p=Je);var x=e.defaultValue,w=e.valueIsNumericString,g=e.onValueChange,s=e.isAllowed,m=e.onChange;m===void 0&&(m=H);var h=e.onKeyDown;h===void 0&&(h=H);var l=e.onMouseUp;l===void 0&&(l=H);var I=e.onFocus;I===void 0&&(I=H);var F=e.onBlur;F===void 0&&(F=H);var S=e.value,O=e.getCaretBoundary;O===void 0&&(O=He);var A=e.isValidInputCharacter;A===void 0&&(A=ie);var T=e.isCharacterSame,W=Ne(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),U=Ae(S,x,!!w,f,p,g),G=U[0],y=G.formattedValue,j=G.numAsString,L=U[1],M=(0,V.useRef)(),K=(0,V.useRef)({formattedValue:y,numAsString:j}),Z=function(o,u){K.current={formattedValue:o.formattedValue,numAsString:o.value},L(o,u)},J=(0,V.useState)(!1),te=J[0],ae=J[1],R=(0,V.useRef)(null),_=(0,V.useRef)({setCaretTimeout:null,focusTimeout:null});(0,V.useEffect)(function(){return ae(!0),function(){clearTimeout(_.current.setCaretTimeout),clearTimeout(_.current.focusTimeout)}},[]);var v=f,d=function(o,u){var c=parseFloat(u);return{formattedValue:o,value:u,floatValue:isNaN(c)?void 0:c}},E=function(o,u,c){o.selectionStart===0&&o.selectionEnd===o.value.length||(Y(o,u),_.current.setCaretTimeout=setTimeout(function(){o.value===c&&o.selectionStart!==u&&Y(o,u)},0))},N=function(o,u,c){return be(o,u,O(o),c)},P=function(o,u,c){var D=O(u),B=ze(u,y,o,c,D,A,T);return B=be(u,B,D),B},k=function(o){var u=o.formattedValue;u===void 0&&(u="");var c=o.input,D=o.source,B=o.event,C=o.numAsString,b;if(c){var $=o.inputValue||c.value,q=se(c);c.value=u,b=P($,u,q),b!==void 0&&E(c,b,u)}u!==y&&Z(d(u,C),{event:B,source:D})};(0,V.useEffect)(function(){var o=K.current,u=o.formattedValue,c=o.numAsString;(y!==u||j!==c)&&Z(d(y,j),{event:void 0,source:ne.props})},[y,j]);var Q=R.current?se(R.current):void 0,oe=typeof window!="undefined"?V.useLayoutEffect:V.useEffect;oe(function(){var o=R.current;if(y!==K.current.formattedValue&&o){var u=P(K.current.formattedValue,y,Q);o.value=y,E(o,u,y)}},[y]);var le=function(o,u,c){var D=u.target,B=M.current?We(M.current,D.selectionEnd):Ee(y,o),C=Object.assign(Object.assign({},B),{lastValue:y}),b=p(o,C),$=v(b);if(b=p($,void 0),s&&!s(d($,b))){var q=u.target,z=se(q),ce=P(o,y,z);return q.value=y,E(q,ce,y),!1}return k({formattedValue:$,numAsString:b,inputValue:o,event:u,source:c,input:u.target}),!0},X=function(o,u){u===void 0&&(u=0);var c=o.selectionStart,D=o.selectionEnd;M.current={selectionStart:c,selectionEnd:D+u}},ue=function(o){var u=o.target,c=u.value,D=le(c,o,ne.event);D&&m(o),M.current=void 0},ve=function(o){var u=o.target,c=o.key,D=u.selectionStart,B=u.selectionEnd,C=u.value;C===void 0&&(C="");var b;c==="ArrowLeft"||c==="Backspace"?b=Math.max(D-1,0):c==="ArrowRight"?b=Math.min(D+1,C.length):c==="Delete"&&(b=D);var $=0;c==="Delete"&&D===B&&($=1);var q=c==="ArrowLeft"||c==="ArrowRight";if(b===void 0||D!==B&&!q){h(o),X(u,$);return}var z=b;if(q){var ce=c==="ArrowLeft"?"left":"right";z=N(C,b,ce),z!==b&&o.preventDefault()}else c==="Delete"&&!A(C[b])?z=N(C,b,"right"):c==="Backspace"&&!A(C[b])&&(z=N(C,b,"left"));z!==b&&E(u,z,C),h(o),X(u,$)},Re=function(o){var u=o.target,c=function(){var D=u.selectionStart,B=u.selectionEnd,C=u.value;if(C===void 0&&(C=""),D===B){var b=N(C,D);b!==D&&E(u,b,C)}};c(),requestAnimationFrame(function(){c()}),l(o),X(u)},Be=function(o){o.persist&&o.persist();var u=o.target,c=o.currentTarget;R.current=u,_.current.focusTimeout=setTimeout(function(){var D=u.selectionStart,B=u.selectionEnd,C=u.value;C===void 0&&(C="");var b=N(C,D);b!==D&&!(D===0&&B===C.length)&&E(u,b,C),I(Object.assign(Object.assign({},o),{currentTarget:c}))},0)},Te=function(o){R.current=null,clearTimeout(_.current.focusTimeout),clearTimeout(_.current.setCaretTimeout),F(o)},_e=te&&Ge()?"numeric":void 0,me=Object.assign({inputMode:_e},W,{type:r,value:y,onChange:ue,onKeyDown:ve,onMouseUp:Re,onFocus:Be,onBlur:Te});if(t==="text")return a?V.default.createElement(V.default.Fragment,null,a(y,W)||null):V.default.createElement("span",Object.assign({},W,{ref:i}),y);if(n){var ke=n;return V.default.createElement(ke,Object.assign({},me,{ref:i}))}return V.default.createElement("input",Object.assign({},me,{ref:i}))}function we(e,r){var t=r.decimalScale,n=r.fixedDecimalScale,a=r.prefix;a===void 0&&(a="");var i=r.suffix;i===void 0&&(i="");var f=r.allowNegative,p=r.thousandsGroupStyle;if(p===void 0&&(p="thousand"),e===""||e==="-")return e;var x=fe(r),w=x.thousandSeparator,g=x.decimalSeparator,s=t!==0&&e.indexOf(".")!==-1||t&&n,m=de(e,f),h=m.beforeDecimal,l=m.afterDecimal,I=m.addNegation;return t!==void 0&&(l=Ce(l,t,!!n)),w&&(h=Le(h,w,p)),a&&(h=a+h),i&&(l=l+i),I&&(h="-"+h),e=h+(s&&g||"")+l,e}function fe(e){var r=e.decimalSeparator;r===void 0&&(r=".");var t=e.thousandSeparator,n=e.allowedDecimalSeparators;return t===!0&&(t=","),n||(n=[r,"."]),{decimalSeparator:r,thousandSeparator:t,allowedDecimalSeparators:n}}function Ye(e,r){e===void 0&&(e="");var t=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),a=t.test(e),i=n.test(e);return e=e.replace(/-/g,""),a&&!i&&r&&(e="-"+e),e}function er(e,r){return new RegExp("(^-)|[0-9]|"+De(e),r?"g":void 0)}function rr(e,r,t){return e===""?!0:!(r!=null&&r.match(/\d/))&&!(t!=null&&t.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function tr(e,r,t){var n;r===void 0&&(r=Ze(e));var a=t.allowNegative,i=t.prefix;i===void 0&&(i="");var f=t.suffix;f===void 0&&(f="");var p=t.decimalScale,x=r.from,w=r.to,g=w.start,s=w.end,m=fe(t),h=m.allowedDecimalSeparators,l=m.decimalSeparator,I=e[s]===l;if(ie(e)&&(e===i||e===f)&&r.lastValue==="")return e;if(s-g===1&&h.indexOf(e[g])!==-1){var F=p===0?"":l;e=e.substring(0,g)+F+e.substring(g+1,e.length)}var S=function(R,_,v){var d=!1,E=!1;i.startsWith("-")?d=!1:R.startsWith("--")?(d=!1,E=!0):f.startsWith("-")&&R.length===f.length?d=!1:R[0]==="-"&&(d=!0);var N=d?1:0;return E&&(N=2),N&&(R=R.substring(N),_-=N,v-=N),{value:R,start:_,end:v,hasNegation:d}},O=S(e,g,s),A=O.hasNegation;n=O,e=n.value,g=n.start,s=n.end;var T=S(r.lastValue,x.start,x.end),W=T.start,U=T.end,G=T.value,y=e.substring(g,s);e.length&&G.length&&(W>G.length-f.length||U<i.length)&&!(y&&f.startsWith(y))&&(e=G);var j=0;e.startsWith(i)?j+=i.length:g<i.length&&(j=g),e=e.substring(j),s-=j;var L=e.length,M=e.length-f.length;e.endsWith(f)?L=M:(s>M||s>e.length-f.length)&&(L=s),e=e.substring(0,L),e=Ye(A?"-"+e:e,a),e=(e.match(er(l,!0))||[]).join("");var K=e.indexOf(l);e=e.replace(new RegExp(De(l),"g"),function(R,_){return _===K?".":""});var Z=de(e,a),J=Z.beforeDecimal,te=Z.afterDecimal,ae=Z.addNegation;return w.end-w.start<x.end-x.start&&J===""&&I&&!parseFloat(te)&&(e=ae?"-":""),e}function ar(e,r){var t=r.prefix;t===void 0&&(t="");var n=r.suffix;n===void 0&&(n="");var a=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";a.fill(!1,0,t.length+(i?1:0));var f=e.length;return a.fill(!1,f-n.length+1,f+1),a}function nr(e){var r=fe(e),t=r.thousandSeparator,n=r.decimalSeparator,a=e.prefix;a===void 0&&(a="");var i=e.allowNegative;if(i===void 0&&(i=!0),t===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+t+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return a.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+a+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function ir(e){e=nr(e);var r=e.decimalSeparator,t=e.allowedDecimalSeparators,n=e.thousandsGroupStyle,a=e.suffix,i=e.allowNegative,f=e.allowLeadingZeros,p=e.onKeyDown;p===void 0&&(p=H);var x=e.onBlur;x===void 0&&(x=H);var w=e.thousandSeparator,g=e.decimalScale,s=e.fixedDecimalScale,m=e.prefix;m===void 0&&(m="");var h=e.defaultValue,l=e.value,I=e.valueIsNumericString,F=e.onValueChange,S=Ne(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),O=fe(e),A=O.decimalSeparator,T=O.allowedDecimalSeparators,W=function(v){return we(v,e)},U=function(v,d){return tr(v,d,e)},G=re(l)?h:l,y=I!=null?I:rr(G,m,a);re(l)?re(h)||(y=y||typeof h=="number"):y=y||typeof l=="number";var j=function(v){return Ve(v)?v:(typeof v=="number"&&(v=Ie(v)),y&&typeof g=="number"?xe(v,g,!!s):v)},L=Ae(j(l),j(h),!!y,W,U,F),M=L[0],K=M.numAsString,Z=M.formattedValue,J=L[1],te=function(v){var d=v.target,E=v.key,N=d.selectionStart,P=d.selectionEnd,k=d.value;if(k===void 0&&(k=""),(E==="Backspace"||E==="Delete")&&P<m.length){v.preventDefault();return}if(N!==P){p(v);return}E==="Backspace"&&k[0]==="-"&&N===m.length+1&&i&&Y(d,1),g&&s&&(E==="Backspace"&&k[N-1]===A?(Y(d,N-1),v.preventDefault()):E==="Delete"&&k[N]===A&&v.preventDefault()),T!=null&&T.includes(E)&&k[N]===A&&Y(d,N+1);var Q=w===!0?",":w;E==="Backspace"&&k[N-1]===Q&&Y(d,N-1),E==="Delete"&&k[N]===Q&&Y(d,N+1),p(v)},ae=function(v){var d=K;if(d.match(/\d/g)||(d=""),f||(d=$e(d)),s&&g&&(d=xe(d,g,s)),d!==K){var E=we(d,e);J({formattedValue:E,value:d,floatValue:parseFloat(d)},{event:v,source:ne.event})}x(v)},R=function(v){return v===A?!0:ie(v)},_=function(v){var d=v.currentValue,E=v.lastValue,N=v.formattedValue,P=v.currentValueIndex,k=v.formattedValueIndex,Q=d[P],oe=N[k],le=Ee(E,d),X=le.to,ue=function(ve){return U(ve).indexOf(".")+m.length};return l===0&&s&&g&&d[X.start]===A&&ue(d)<P&&ue(N)>k?!1:P>=X.start&&P<X.end&&T&&T.includes(Q)&&oe===A?!0:Q===oe};return Object.assign(Object.assign({},S),{value:Z,valueIsNumericString:!1,isValidInputCharacter:R,isCharacterSame:_,onValueChange:J,format:W,removeFormatting:U,getCaretBoundary:function(v){return ar(v,e)},onKeyDown:te,onBlur:ae})}function Fe(e){var r=ir(e);return V.default.createElement(Xe,Object.assign({},r))}function Oe(){var t,n,a;let r=(a=(n=(t=Intl.NumberFormat())==null?void 0:t.formatToParts(1.1))==null?void 0:n.find(i=>i.type==="decimal"))==null?void 0:a.value;return r!=null?r:"."}function or(){return Oe()==="."?",":"."}var ur=e=>{let{value:r,onChange:t,disabled:n,highlight:a,validatedSelection:i,fixedDecimals:f,allowNegative:p,thousandSeparator:x,decimalSeparator:w}=e,g=ee.useRef();return ee.useLayoutEffect(()=>{var s;if(i!==void 0){let m=typeof i=="number"?[i,null]:i;(s=g.current)==null||s.setSelectionRange(m[0],m[1])}},[i]),ee.createElement(ye,null,ee.createElement(Fe,{autoFocus:!0,getInputRef:g,className:"gdg-input",onFocus:s=>s.target.setSelectionRange(a?0:s.target.value.length,s.target.value.length),disabled:n===!0,decimalScale:f,allowNegative:p,thousandSeparator:x!=null?x:or(),decimalSeparator:w!=null?w:Oe(),value:Object.is(r,-0)?"-":r!=null?r:"",onValueChange:t}))},dr=ur;export{dr as default};

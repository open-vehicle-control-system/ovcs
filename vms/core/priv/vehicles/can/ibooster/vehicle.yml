---
bitrate: 500000
received_frames:
  # - name: ibooster_alert_matrix -> Multiplexed frame containing 175 flags. Not supported in cantastic yet.
  #   id: 0x35D
  # - name: ibooster_info -> build and bootloader info, not really interesting
  #   id: 0x32D
emitted_frames:
  - name: vehicle_status # Validated
    id: 0x38B
    frequency: 10 # Not verified, 20ms mentionned in comment
    signals:
      - name: crc # lut_checksum(dat, 8, crc8_lut_1d);
        kind: checksum
        value_start: 0
        value_length: 8
      - name: counter # cycling between 0 to 15 (0x0F)
        kind: integer
        value_start: 8
        value_length: 8
      - name: filler1 # P_EST_MAX + 2 zeros in Ocelot
        kind: static
        value: 0x00
        value_start: 16
        value_length: 10
      - name: vehicle_speed # /!\ In ocelod, P_EST_MAX_QF is ored with the 6th bit of vehicle speed /!\ (see line 632)
        value_start: 26
        value_length: 14
        scale: "1.777777778" # based on "ESP_vehicleSpeed = ((current_speed*16) / 9)", but, not sure current_speed is in Km/h
      - name: filler2 # VEHICLE_QF(=1) | (IGNITION_ON(=0) << 3U); in Ocelot
        kind: static
        value: 0x01
        value_start: 40
        value_length: 8
      - name: filler3
        kind: static
        value: 0x00
        value_start: 48
        value_length: 16
  - name: brake_request
    id: 0x38C
    frequency: 10 # Frequency unknown and undocummented
    signals:
      - name: crc
        kind: checksum
        value_start: 0
        value_length: 8
      - name: counter
        kind: integer
        value_start: 8
        value_length: 8
      - name: filler1 # P_LIMIT_EXTERNAL * 2;
        kind: static
        value: 0xF0
        value_start: 16
        value_length: 9
      - name: filler2
        kind: static
        value: 0x00
        value_start: 25
        value_length: 3
      # Int, 32256 (0x7e00) by default
      # 0x7e00 = min rod position = 32256, 0x8200 = max brake (not sure) = 33280
      # Set to default when driver_brake_applied
      - name: q_target_ext # quantity target external? target break level based on external factors?
        value_start: 28
        value_length: 16
        kind: integer
      # Boolean, false by default,
      # set to true when PID loop start, set to true again in relative mode, set to false when not relative nor pid mode
      # Set to false when driver brake applied
      - name: q_target_ext_qf # quantity target quality factor? wheter to measure the quality factor of q_target_ext?
        value_start: 44
        value_length: 4
        kind: enum
        mapping:
          0x00: False
          0x01: True
      - name: filler2
        kind: static
        value: 0x00
        value_start: 48
        value_length: 16
  - name: vehicle_alive # Validated
    id: 0x38D
    frequency: 10 # Frequency unknown and undocummented
    signals:
      - name: crc
        kind: checksum
        value_start: 0
        value_length: 8
      - name: counter
        kind: integer
        value_start: 8
        value_length: 8
      - name: filler1
        kind: static
        value: 0x00
        value_start: 16
        value_length: 32
      - name: filler2
        kind: static
        value: 0x20
        value_start: 48
        value_length: 8
      - name: filler3
        kind: static
        value: 0x00
        value_start: 56
        value_length: 8
  - name: test_esp_status
    id: 0x91
    frequency: 10
    signals:
      - name: static
        kind: static
        value: 0x00
        value_start: 0
        value_length: 64
  - name: test_esp_b
    id: 0x9B
    frequency: 10
    signals:
      - name: static
        kind: static
        value: 0x00
        value_start: 0
        value_length: 64
  - name: test_esp_info
    id: 0x328
    frequency: 10
    signals:
      - name: static
        kind: static
        value: 0x00
        value_start: 0
        value_length: 64
        
---
can_networks:
  ovcs:
    bitrate: 500000
    emitted_frames:
      - name: contactors_status_request
        id: 0x100
        frequency: 20
        signals:
          - name: main_negative_contactor_enabled
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: false
              0x01: true
          - name: main_positive_contactor_enabled
            kind: enum
            value_start: 8
            value_length: 8
            mapping:
              0x00: false
              0x01: true
          - name: precharge_contactor_enabled
            kind: enum
            value_start: 16
            value_length: 8
            mapping:
              0x00: false
              0x01: true
      - name: vms_relays_status_request
        id: 0x110
        frequency: 20
        signals:
          - name: inverter_relay_enabled
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: false
              0x01: true
      - name: gear_status
        id: 0x600
        frequency: 20
        signals:
          - name: selected_gear
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: drive
              0x01: neutral
              0x02: reverse
              0x03: parking
      - name: vms_status
        id: 0x1A0
        frequency: 100
        signals:
          - name: status
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: ok
              0x01: warning
              0xFF: failure
          - name: counter
            value_start: 8
            value_length: 8
    received_frames:
      - name: contactors_status
        id: 0x101
        frequency: 10
        signals:
          - name: main_negative_contactor_enabled
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: false
              0x01: true
          - name: main_positive_contactor_enabled
            kind: enum
            value_start: 8
            value_length: 8
            mapping:
              0x00: false
              0x01: true
          - name: precharge_contactor_enabled
            kind: enum
            value_start: 16
            value_length: 8
            mapping:
              0x00: false
              0x01: true
      - name: vms_relays_status
        id: 0x111
        frequency: 10
        signals:
          - name: inverter_relay_enabled
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: false
              0x01: true
      - name: car_controls_status
        id: 0x200
        frequency: 10
        signals:
          - name: raw_max_throttle
            value_start: 0
            value_length: 16
          - name: raw_throttle_a
            value_start: 16
            value_length: 16
          - name: raw_throttle_b
            value_start: 32
            value_length: 16
          - name: requested_gear
            kind: enum
            value_start: 48
            value_length: 8
            mapping:
              0x00: drive
              0x01: neutral
              0x02: reverse
              0x03: parking
  leaf_drive:
    bitrate: 500000
    emitted_frames:
      - name: vms_alive
        id: 0x50B
        frequency: 100
        signals:
          - name: unknown
            kind: static
            value_start: 0
            value_length: 56
            value: 0x000006C0000000
      - name: vms_torque_request
        id: 0x1D4
        frequency: 10
        signals:
          - name: prefix
            kind: static
            value_start: 0
            value_length: 16
            value: 0x6E6E
          - name: requested_torque
            sign: signed
            endianness: big
            value_start: 16
            value_length: 12
            scale: 0.25
            unit: N/m
          - name: filler
            kind: static
            value_start: 28
            value_length: 4
            value: 0x00
          - name: counter
            value_start: 32
            value_length: 8
          - name: suffix
            kind: static
            value_start: 40
            value_length: 16
            value: 0x4401
          - name: crc
            value_start: 56
            value_length: 8
      - name: vms_status
        id: 0x11A
        frequency: 10
        signals:
          - name: gear
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: parking
              0x02: reverse
              0x03: neutral
              0x04: drive
          - name: filler1
            kind: static
            value_start: 8
            value_length: 8
            value: 0x40
          - name: steering_wheel_butoon
            kind: static
            value_start: 16
            value_length: 8
            value: 0x0
          - name: heartbeat
            value_start: 24
            value_length: 8
            mapping:
              0x55: 0
              0xAA: 1
          - name: filler2
            kind: static
            value_start: 32
            value_length: 16
            value: 0xC000
          - name: counter
            value_start: 48
            value_length: 8
          - name: crc
            value_start: 56
            value_length: 8
    received_frames:
      - name: inverter_status
        id: 0x1DA
        frequency: 10
        signals:
          - name: inverter_output_voltage
            value_start: 0
            value_length: 8
            scale: 2
            unit: V
          - name: em57_effective_torque
            endianness: big
            sign: signed
            value_start: 21
            value_length: 11
            scale: 0.5
            unit: N/m
          - name: em57_rotations_per_minute
            endianness: big
            sign: signed
            value_start: 32
            value_length: 16
            unit: rpm
      - name: inverter_temperatures
        id: 0x55A
        frequency: 10
        signals:
          - name: inverter_communication_board_temperature
            value_start: 8
            value_length: 8
            unit: C
          - name: insulated_gate_bipolar_transistor_temperature
            value_start: 16
            value_length: 8
            unit: C
          - name: insulated_gate_bipolar_transistor_board_temperature
            value_start: 24
            value_length: 8
            unit: C
          - name: motor_temperature
            value_start: 32
            value_length: 8
            unit: C

  polo_drive:
    bitrate: 500000
    emitted_frames:
      - name: engine_status
        id: 0x280
        frequency: 100
        signals:
          - name: filler1
            kind: static
            value_start: 0
            value_length: 16
            value: 0x0000
          - name: engine_rotations_per_minute
            kind: integer
            unit: rpm
            value_start: 16
            value_length: 16
            scale: 0.25
          - name: filler2
            kind: static
            value_start: 32
            value_length: 32
            value: 0x00000000
    received_frames:
      - name: car_status
        id: 0x470
        signals:
          - name: front_left_door_open
            kind: enum
            value_start: 15
            value_length: 1
            mapping:
              0x00: false
              0x01: true
          - name: front_right_door_open
            kind: enum
            value_start: 14
            value_length: 1
            mapping:
              0x00: false
              0x01: true
          - name: rear_left_door_open
            kind: enum
            value_start: 13
            value_length: 1
            mapping:
              0x00: false
              0x01: true
          - name: rear_right_door_open
            kind: enum
            value_start: 12
            value_length: 1
            mapping:
              0x00: false
              0x01: true
          - name: trunk_door_open
            kind: enum
            value_start: 10
            value_length: 1
            mapping:
              0x00: false
              0x01: true
          - name: beam_active
            kind: enum
            value_start: 16
            value_length: 8
            mapping:
              0x00: false
              0x64: true
          - name: warning_lights_active
            kind: enum
            value_start: 0
            value_length: 8
            mapping: # 0:False, 8:WarningActiveOff, 11:WarningActiveOn, 1:leftActive, 2:rightActive
              0x00: false
              0x01: false
              0x02: false
              0x08: true
              0x0B: true
      - name: airbags_status
        id: 0x50
        signals:
          - name: in_car_airbag_system_online
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: true
              0x02: false
          - name: passenger_airbag_online
            kind: enum
            value_start: 8
            value_length: 8
            mapping:
              0x09: true
              0xB: false
      - name: handbrake_status
        id: 0x320
        signals:
          - name: handbrake_engaged
            kind: enum
            value_start: 8
            value_length: 8
            mapping:
              0x00: false
              0x02: true
      - name: lock_status
        id: 0x591
        signals:
          - name: lock_state
            kind: enum
            value_start: 8
            value_length: 8
            mapping: # 8 seems to be the state when the car boots and is already open
              0x00: open
              0x01: car_switch_closed
              0x04: key_closed
              0x08: open
      - name: key_status
        id: 0x570
        signals:
          - name: key_state
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: 'off'
              0x01: key_engaged
              0x87: contact_on
              0x8B: start_engine
      - name: abs_status
        id: 0x5A0
        frequency: 20
        allowed_frequency_leeway: 20
        signals:
          - name: speed
            unit: km/h
            value_start: 8
            value_length: 16
            scale: 0.0075
  polo_comfort:
    bitrate: 100000
    received_frames:
      - name: key_status_confort
        id: 0x271
        signals:
          - name: key_state
            kind: enum
            value_start: 0
            value_length: 8
            mapping:
              0x00: 'off'
              0x01: key_engaged
              0x87: contact_on
              0x8B: start_engine
